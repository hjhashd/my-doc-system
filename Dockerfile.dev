# 开发环境 Dockerfile
FROM node:18-alpine

# 启用 pnpm
RUN corepack enable

WORKDIR /app

# 安装所有依赖 (包括 devDependencies)
COPY package.json pnpm-lock.yaml ./
RUN pnpm install --frozen-lockfile

# 复制所有项目代码
COPY . .

# 暴露端口 3001 (与您当前配置一致)
EXPOSE 3001

# 设置环境变量
ENV NODE_ENV=development
ENV PORT=3001

# 启动开发服务器，支持热重载
CMD ["pnpm", "dev"]